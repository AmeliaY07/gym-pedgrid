<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="PedGrid" lang="en" name="description" xml:lang="en" />
<meta content="Autonomous Vehicle Simulation" name="keywords" />
<meta content="en_US" property="og:locale" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Guide &mdash; PedGrid 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Developer Guide" href="dev-guide.html" />
    <link rel="prev" title="Installation Guide" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PedGrid
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">User Guide</a><ul>
<li><a class="reference internal" href="#making-and-customizing-environments">Making and Customizing Environments</a></li>
<li><a class="reference internal" href="#how-to-use-the-metriccollector">How to Use the MetricCollector</a></li>
<li><a class="reference internal" href="#how-to-create-add-simple-pedestrians-vehicles-and-road-infrastructure-to-an-environment">How to Create &amp; Add Simple Pedestrians, Vehicles, and Road Infrastructure to an Environment</a></li>
<li><a class="reference internal" href="#rendering">Rendering:</a></li>
<li><a class="reference internal" href="#pedestrianenv">PedestrianEnv</a><ul>
<li><a class="reference internal" href="#description">Description:</a></li>
<li><a class="reference internal" href="#action-space">Action Space:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PedGrid</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">User Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/user-guide.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this heading"></a></h1>
<section id="making-and-customizing-environments">
<h2>Making and Customizing Environments<a class="headerlink" href="#making-and-customizing-environments" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Wrap the desired environment class</p></li>
<li><p>Super initialize with custom parameters (*only height and width are supported as of now)</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PedestrianEnv20x80</span><span class="p">(</span><span class="n">PedestrianEnv</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">___init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">80</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">pedAgents</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Register the child class environment with gym-minigrid</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">register</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;PedestrianEnv-20x80-v0&#39;</span><span class="p">,</span>
    <span class="n">entry_point</span><span class="o">=</span><span class="s1">&#39;gym_minigrid.envs.pedestrian.PedestrianEnv:PedestrianEnv20x80&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Make the environment with gym
env = gym.make(‘PedestrianEnv-20x80-v0’)</p></li>
</ol>
<p>In the future, parameters will be incorporated into gym’s make function.</p>
</section>
<section id="how-to-use-the-metriccollector">
<h2>How to Use the MetricCollector<a class="headerlink" href="#how-to-use-the-metriccollector" title="Permalink to this heading"></a></h2>
<p>The MetricCollector observes an environment for a defined number of time steps and can be declared as such:</p>
<p>metricCollector = MetricCollector(env, stepsToIgnoreAtTheBeginning = , stepsToRecord = )</p>
<p>Suppose stepsToIgnoreAtTheBeginning = 100 and stepsToRecord = 1000; then, the MetricCollector will observe and maintain the metrics for time steps 101 to 1100.</p>
</section>
<section id="how-to-create-add-simple-pedestrians-vehicles-and-road-infrastructure-to-an-environment">
<h2>How to Create &amp; Add Simple Pedestrians, Vehicles, and Road Infrastructure to an Environment<a class="headerlink" href="#how-to-create-add-simple-pedestrians-vehicles-and-road-infrastructure-to-an-environment" title="Permalink to this heading"></a></h2>
<p>Example Pedestrian:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ped</span> <span class="o">=</span> <span class="n">PedAgent</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="n">Direction</span><span class="o">.</span><span class="n">North</span><span class="p">,</span> <span class="n">maxSpeed</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">addPedAgent</span><span class="p">(</span><span class="n">ped</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, a list of pedestrians can be appended at once:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">peds</span> <span class="o">=</span> <span class="p">[</span><span class="n">ped_1</span><span class="p">,</span> <span class="n">ped_2</span><span class="p">,</span> <span class="n">ped_n</span><span class="p">]</span>
<span class="n">env</span><span class="o">.</span><span class="n">addPedAgents</span><span class="p">(</span><span class="n">peds</span><span class="p">)</span>
</pre></div>
</div>
<p>Example Vehicle:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">veh</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">topLeft</span><span class="o">=</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">),</span> <span class="n">bottomRight</span><span class="o">=</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="n">Direction</span><span class="o">.</span><span class="n">East</span><span class="p">,</span> <span class="n">maxSpeed</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">speed</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">inRoad</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inLane</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">addVehicleAgent</span><span class="p">(</span><span class="n">veh</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly, a list of vehicles can be appended with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">env</span><span class="o">.</span><span class="n">addVehicleAgents</span><span class="p">()</span>
</pre></div>
</div>
<p>Example Lane:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lane</span> <span class="o">=</span> <span class="n">Lane</span><span class="p">(</span>
    <span class="n">topLeft</span><span class="o">=</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span>
    <span class="n">bottomRight</span><span class="o">=</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span>
    <span class="n">direction</span><span class="o">=</span><span class="n">Direction</span><span class="o">.</span><span class="n">South</span><span class="p">,</span>
    <span class="n">inRoad</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">laneID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">posRelativeToCenter</span><span class="o">=-</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Example Road:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">road</span> <span class="o">=</span> <span class="n">Road</span><span class="p">(</span><span class="n">lanes</span><span class="o">=</span><span class="p">[</span><span class="n">lane1</span><span class="p">,</span> <span class="n">lane2</span><span class="p">],</span> <span class="n">roadID</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Example Sidewalk:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sidewalk</span> <span class="o">=</span> <span class="n">Sidewalk</span><span class="p">(</span>
    <span class="n">topLeft</span><span class="o">=</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span>
    <span class="n">bottomRight</span><span class="o">=</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span>
    <span class="n">sidewalkID</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Example Crosswalk:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crosswalk1</span> <span class="o">=</span> <span class="n">Crosswalk</span><span class="p">(</span>
    <span class="n">topLeft</span><span class="o">=</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span>
    <span class="n">bottomRight</span><span class="o">=</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">),</span>
    <span class="n">crosswalkID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">overlapRoad</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">overlapLanes</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># laneIDs of the lanes</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="rendering">
<h2>Rendering:<a class="headerlink" href="#rendering" title="Permalink to this heading"></a></h2>
<p>Suppose we want to run a simulation for 1,000 steps. Rendering each step would take considerable time. Thus, rendering can be turned off by commenting out env.render() or controlled to only render at interval steps via modulus. This way, the simulation will run much quicker.</p>
</section>
<section id="pedestrianenv">
<h2>PedestrianEnv<a class="headerlink" href="#pedestrianenv" title="Permalink to this heading"></a></h2>
<section id="description">
<h3>Description:<a class="headerlink" href="#description" title="Permalink to this heading"></a></h3>
<p>This environment models a simple grid for behavior simulation involving pedestrians, containing a G<sub>m x n</sub> grid with customizable length m and height n. PedestrianEnv only supports pedestrian agents, or PedAgents. No other static or dynamic objects are supported. Pedestrians may be added or removed any time during simulation.</p>
</section>
<section id="action-space">
<h3>Action Space:<a class="headerlink" href="#action-space" title="Permalink to this heading"></a></h3>
<p>PedGrid utilizes <strong><em>Action</em></strong> objects with properties <em>agent</em> with the agent reference and <em>action</em> as an enum. Currently, there are two enum classes defining dynamic agent movement.</p>
<ul class="simple">
<li><p>LaneAction</p>
<ul>
<li><p>.KEEP: agent keeps the current lane</p></li>
<li><p>.LEFT: agent shifts a tile to the left</p></li>
<li><p>.RIGHT: agent shifts a tile to the right</p></li>
</ul>
</li>
<li><p>ForwardAction</p>
<ul>
<li><p>.KEEP: agent moves forward by agent.speed tiles</p></li>
</ul>
</li>
</ul>
<p><strong>Note:</strong> When a pedestrian agent reaches the end of the environment during a forward action, they automatically turn around in the opposite direction.</p>
<p><img alt="Action Space" src="_images/action-space.png" /></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dev-guide.html" class="btn btn-neutral float-right" title="Developer Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Golam Md Muktadir, Taorui Huang, Zarif Ikram, Abdul Jawad.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>